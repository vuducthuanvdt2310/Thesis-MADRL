# Multi-DC 2-Echelon Inventory Environment Configuration

environment:
  n_skus: 3  # Number of products
  n_retailers: 15 # Number of retailers
  max_days: 365  # Episode length
  
  lead_time:
    # Supplier → DC (long-distance, variable)
    supplier_to_dc:
      distribution: "uniform"
      min: 7
      max: 14
    
    # DC → Retailer (regional, fast)
    dc_to_retailer:
      distribution: "uniform"
      min: 1
      max: 1  # Fixed 1-day delivery for easier training

# Constraints (Termination conditions)
constraints:
  # Minimum on-shelf quantity for each Retailer x SKU
  # If inventory drops below this value for ANY SKU at ANY retailer, the episode terminates.
  on_shelf_quantity:
    - [5.0, 5.0, 5.0]  # Retailer_0
    - [5.0, 5.0, 5.0]  # Retailer_1
    - [5.0, 5.0, 5.0]  # Retailer_2
    - [5.0, 5.0, 5.0]  # Retailer_3
    - [5.0, 5.0, 5.0]  # Retailer_4
    - [5.0, 5.0, 5.0]  # Retailer_5
    - [5.0, 5.0, 5.0]  # Retailer_6
    - [5.0, 5.0, 5.0]  # Retailer_7
    - [5.0, 5.0, 5.0]  # Retailer_8
    - [5.0, 5.0, 5.0]  # Retailer_9
    - [5.0, 5.0, 5.0]  # Retailer_10
    - [5.0, 5.0, 5.0]  # Retailer_11
    - [5.0, 5.0, 5.0]  # Retailer_12
    - [5.0, 5.0, 5.0]  # Retailer_13
    - [5.0, 5.0, 5.0]  # Retailer_14

# Reward parameters
rewards:
  survival_reward: 0.0  # Bonus for each step not terminated
  termination_penalty: 500.0  # Penalty for violation termination

# Cost parameters (Unit: 10,000 VND - e.g., 7.5 = 75,000 VND)
costs:
  # DC Costs (2 DCs × 3 SKUs)
  holding_cost_dc:
    - [0.08, 0.06, 0.12]  # DC_0: 800, 600, 1200 VND/day - realistic 0.5-2% annual rate
    - [0.07, 0.05, 0.10]  # DC_1

  backlog_cost_dc:
    - [1.0, 0.8, 1.5]  # DC_0: 10k, 8k, 15k VND/day - reduced from overly punitive 30-40k
    - [1.0, 0.8, 1.5]  # DC_1
  
  fixed_order_cost_dc:
    - [100.0, 100.0, 100.0]  # DC_0: 1M VND - High fixed cost to force bulk ordering (Cycle Stock)
    - [100.0, 100.0, 100.0]  # DC_1
  
  # Retailer Costs (3 Retailers × 3 SKUs)
  # BALANCED to match DC cost magnitude - prevent reward explosion
  holding_cost_retailer:
    - [0.12, 0.10, 0.15]  # Retailer_0: HIGHER than DC to penalize overstocking at retail
    - [0.12, 0.10, 0.15]  # Retailer_1
    - [0.12, 0.10, 0.15]  # Retailer_2
    - [0.12, 0.10, 0.15]  # Retailer_3
    - [0.12, 0.10, 0.15]  # Retailer_4
    - [0.12, 0.10, 0.15]  # Retailer_5
    - [0.12, 0.10, 0.15]  # Retailer_6
    - [0.12, 0.10, 0.15]  # Retailer_7
    - [0.12, 0.10, 0.15]  # Retailer_8
    - [0.12, 0.10, 0.15]  # Retailer_9
    - [0.12, 0.10, 0.15]  # Retailer_10
    - [0.12, 0.10, 0.15]  # Retailer_11
    - [0.12, 0.10, 0.15]  # Retailer_12
    - [0.12, 0.10, 0.15]  # Retailer_13
    - [0.12, 0.10, 0.15]  # Retailer_14
  
  backlog_cost_retailer:
    - [2.0, 1.8, 2.5]  # Retailer_0: HIGHEST penalty (Lost Sales)
    - [2.0, 1.8, 2.5]  # Retailer_1
    - [2.0, 1.8, 2.5]  # Retailer_2
    - [2.0, 1.8, 2.5]  # Retailer_3
    - [2.0, 1.8, 2.5]  # Retailer_4
    - [2.0, 1.8, 2.5]  # Retailer_5
    - [2.0, 1.8, 2.5]  # Retailer_6
    - [2.0, 1.8, 2.5]  # Retailer_7
    - [2.0, 1.8, 2.5]  # Retailer_8
    - [2.0, 1.8, 2.5]  # Retailer_9
    - [2.0, 1.8, 2.5]  # Retailer_10
    - [2.0, 1.8, 2.5]  # Retailer_11
    - [2.0, 1.8, 2.5]  # Retailer_12
    - [2.0, 1.8, 2.5]  # Retailer_13
    - [2.0, 1.8, 2.5]  # Retailer_14
  
  fixed_order_cost_retailer:
    - [2.5, 2.5, 2.5]  # Retailer_0
    - [2.5, 2.5, 2.5]  # Retailer_1
    - [2.5, 2.5, 2.5]  # Retailer_2
    - [2.5, 2.5, 2.5]  # Retailer_3
    - [2.5, 2.5, 2.5]  # Retailer_4
    - [2.5, 2.5, 2.5]  # Retailer_5
    - [2.5, 2.5, 2.5]  # Retailer_6
    - [2.5, 2.5, 2.5]  # Retailer_7
    - [2.5, 2.5, 2.5]  # Retailer_8
    - [2.5, 2.5, 2.5]  # Retailer_9
    - [2.5, 2.5, 2.5]  # Retailer_10
    - [2.5, 2.5, 2.5]  # Retailer_11
    - [2.5, 2.5, 2.5]  # Retailer_12
    - [2.5, 2.5, 2.5]  # Retailer_13
    - [2.5, 2.5, 2.5]  # Retailer_14
  
  # Variable costs for ordering from DCs (per unit transportation/handling)
  # Shape: (n_retailers, n_dcs, n_skus)
  # REDUCED to balance with DC market prices - prevent high ordering costs
  variable_cost_retailer:
    # Retailer_0
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_1
    - [ [0.6, 0.5, 0.8],
        [0.5, 0.4, 0.7] ]
    # Retailer_2
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_3
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_4
    - [ [0.6, 0.5, 0.8],
        [0.5, 0.4, 0.7] ]
    # Retailer_5
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_6
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_7
    - [ [0.6, 0.5, 0.8],
        [0.5, 0.4, 0.7] ]
    # Retailer_8
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_9
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_10
    - [ [0.6, 0.5, 0.8],
        [0.5, 0.4, 0.7] ]
    # Retailer_11
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_12
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]
    # Retailer_13
    - [ [0.6, 0.5, 0.8],
        [0.5, 0.4, 0.7] ]
    # Retailer_14
    - [ [0.5, 0.4, 0.7],
        [0.6, 0.5, 0.8] ]

# Market Pricing (for DC orders from supplier)
pricing:
  base_price: [10.0, 8.0, 15.0]  # Base prices per SKU
  min_price: [6.0, 4.0, 10.0]    # Price floor
  max_price: [18.0, 14.0, 25.0]  # Price ceiling
  volatility: 0.15  # ±15% typical variation
